\begin{dsaCharacterSheet}

\bgroup\renewcommand{\arraystretch}{1.325}
\vspace*{-3pt}
\begin{dsaSheetBox}
    \vspace{15pt}
    \begin{center}
        \Huge\mansontt\shadowtext{\textbf{Heldendokument}}
    \end{center}
    \begin{tabular}{p{2.1cm}p{\dimexpr.5\textwidth-4\tabcolsep-2.1cm}p{2.1cm}p{\dimexpr.5\textwidth-4\tabcolsep-2.1cm}}
        \directlua{frontseite.held:top()}
    \end{tabular}
\end{dsaSheetBox}

\vspace{-8pt}
\begin{multicols}{2}
\begin{dsaSheetBox}[.5\textwidth-.5\columnsep]
    \begin{tabular}{p{2.3cm}p{\dimexpr\textwidth-4\tabcolsep-2.3cm}}
        \directlua{frontseite.held:links()}
    \end{tabular}
\end{dsaSheetBox}%

\columnbreak%
\begin{dsaSheetBox}[.5\textwidth-.5\columnsep]

    \begin{tabular}{p{2.5cm}p{\dimexpr\textwidth-4\tabcolsep-2.5cm}}
        \directlua{frontseite.held:rechts()}
    \end{tabular}
\end{dsaSheetBox}%
\end{multicols}
\vspace{-12pt}

\begin{dsaSheetBox}[\textwidth]
    \begin{tabular}{p{\dimexpr\textwidth-2\tabcolsep}}
        \directlua{common.multiline_content({
            name="Aussehen", rows=common.current_page.Aussehen,
            baselinestretch=1.35, preamble="Aussehen",
            hspace="10pt"}, data.Held.Aussehen)
        }
    \end{tabular}
\end{dsaSheetBox}%

\vspace{-8pt}
\begin{multicols}{2}
    \dsaHeading{Vorteile}
    \vspace{-12pt}
    \begin{dsaSheetBox}[.5\textwidth-.5\columnsep]
        \begin{tabular}{p{\dimexpr\textwidth-2\tabcolsep}}
            \directlua{
                local fixed = common.list_known(data.Vorteile, {
                    Eisern = "Eisern", Flink = "Flink",
                    BegabungFuerTalentgruppe = "Begabung für [Talentgruppe]",
                    BegabungFuerTalent = "Begabung für [Talent]",
                    AkademischeAusbildung = "Akademische Ausbildung",
                    EidetischesGedaechtnis = "Eidetisches Gedächtnis",
                    GutesGedaechtnis = "Gutes Gedächtnis",
                })
                local fixed_m = common.list_known(data.Vorteile.Magisch, {
                    BegabungFuerMerkmal = "Begabung für [Merkmal]",
                    BegabungFuerRitual = "Begabung für [Ritual]",
                    BegabungFuerZauber = "Begabung für [Zauber]",
                    Meisterhandwerk = "Meisterhandwerk",
                })
                common.multiline_content({
                    name="Vorteile", rows=common.current_page.Vorteile,
                    baselinestretch=1.35
                }, data.Vorteile, fixed, data.Vorteile.Magisch, fixed_m)
            }
        \end{tabular}
    \end{dsaSheetBox}

\columnbreak

    \dsaHeading{Nachteile}
    \vspace{-12pt}
    \begin{dsaSheetBox}[.5\textwidth-.5\columnsep]
        \begin{tabular}{p{\dimexpr\textwidth-2\tabcolsep}}
            \directlua{
                local fixed = common.list_known(data.Nachteile,
                    {Glasknochen = "Glasknochen", Behaebig = "Behäbig",
                     Kleinwuechsig = "Kleinwüchsig", Unstet = "Unstet",
                     Zwergenwuchs = "Zwergenwuchs",
                     UnfaehigkeitFuerTalentgruppe = "Unfähigkeit für [Talentgruppe]",
                     UnfaehigkeitFuerTalent = "Unfähigkeit für [Talent]"})
                local fixed_m = common.list_known(data.Nachteile.Magisch, {
                    UnfaehigkeitFuerMerkmal = "Unfähigkeit für [Merkmal]",
                })
                common.multiline_content({
                    name="Nachteile", rows=common.current_page.Nachteile,
                    baselinestretch=1.35
                }, data.Nachteile, fixed, data.Nachteile.Magisch, fixed_m)
            }
        \end{tabular}
    \end{dsaSheetBox}
\end{multicols}
\egroup

\vspace{-36pt}
\dsaHeading{Eigenschaften \& Basiswerte}
\vspace{-4pt}

\vspace{-8pt}
\begin{dsaSheetBox}[2\fboxsep + 6.72cm]
    \setlength{\tabcolsep}{0pt}
    \renewcommand{\arraystretch}{1.325}
    \begin{NiceTabular}{p{3.1cm}|x{1.2cm}|x{1.2cm}!{\vrule width 4\arrayrulewidth}x{1.2cm}}
        \setarstrut{\tiny} & \dsaSH Modifikator & \dsaSH Start & \dsaSH Aktuell \\ \restorearstrut
        \directlua{
            frontseite.eigenschaften:links()
        }
   \end{NiceTabular}%
\end{dsaSheetBox}
\begin{dsaSheetBox}[2\fboxsep + 11.2cm]
    \setlength{\tabcolsep}{0pt}
    \renewcommand{\arraystretch}{1.325}
    \vspace{-0.375pt}
    \begin{NiceTabular}{p{5.3cm}!{\vrule width 4\arrayrulewidth}x{1.2cm}!{\vrule width 4\arrayrulewidth}x{1.2cm}|x{1.2cm}@{/}x{0.8cm}|x{1.2cm}}
        \setarstrut{\tiny} & \dsaSH Aktuell & \dsaSH Modifikator & \multicolumn{2}{l}{
            \dsaSH \begin{tabular}{x{1.25cm}@{\tiny/}x{0.85cm}}
                Zugekauft & Max
            \end{tabular}
        } & \dsaSH Permanent \\ \restorearstrut
        \directlua{frontseite.eigenschaften:rechts()}
    \end{NiceTabular}
    \vspace{-0.5875pt}
\end{dsaSheetBox}

\vspace{-25pt}
\dsaHeading{Abenteuerpunkte}
\vspace{-12pt}

\begin{dsaSheetBox}[\textwidth]
    \large
    \directlua{common.value_line:render({"AP_Gesamt", "AP_Eingesetzt", "AP_Guthaben"}, "40pt", "2.5cm")}
\end{dsaSheetBox}%
\begin{tikzpicture}[remember picture, overlay]
    \node[inner sep=0pt] at ([xshift=0cm,yshift=-1.35cm]current page.north) {%
        \includegraphics[width=6cm]{../img/logo-fanprodukt.png}%
    };%
\end{tikzpicture}%

\end{dsaCharacterSheet}